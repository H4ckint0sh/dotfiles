#!/bin/bash

set -eo pipefail

ICON_PATH=/Applications/Alacritty.app/Contents/Resources/alacritty.icns
if [ ! -f "$ICON_PATH" ]; then
  echo "Can't find existing icon, make sure Alacritty is installed"
  exit 1
fi

echo "Backing up existing icon"
HASH="$(shasum $ICON_PATH | head -c 10)"
mv "$ICON_PATH" "$ICON_PATH.backup-$HASH"

echo "Downloading replacement icon"
ICON_URL=https://github.com/hmarr/dotfiles/files/8549877/alacritty.icns.gz
curl -sL $ICON_URL | gunzip > "$ICON_PATH"

touch /Applications/Alacritty.app
killall Finder
killall Dock
