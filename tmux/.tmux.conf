# catppuccin palette colors
rosewater="#f5e0dc"
flamingo="#f2cdcd"
pink="#f5c2e7"
mauve="#cba6f7"
red="#f38ba8"
maroon="#eba0ac"
peach="#fab387"
yellow="#f9e2af"
green="#a6e3a1"
teal="#94e2d5"
sky="#89dceb"
overlay1="#7f849c"
sapphire="#74c7ec"
blue="#89b4fa"
lavender="#b4befe"
text="#cdd6f4"
base="#1e1e2e"

# set the terminals
set-option -g detach-on-destroy off
set -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:RGB"
set -g mouse on

# Reload config
bind r source-file ~/.tmux.conf \; \
display-message "Config Reloaded."

# remove confirm step when killing a window or pane
bind-key & kill-window
bind-key x kill-pane

# Reduce delay
set -s escape-time 1

#statusbar
set -g status-position top

#env
setenv -g SHOW_DIRECTORY_NAME 1

# Window and pane index form 1
set -g base-index 1
set -g pane-base-index 1
set -gw pane-active-border-style 'bg=0'
set -gw pane-border-style ""
set -gw pane-active-border-style ""
set -gw popup-border-style "fg=$text"
set -gw popup-border-lines single

# Copy mode
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"
unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode when dragging with mouse
unbind f

# Keyboard shortcut bindings
bind C-b last-window
bind C-h resize-pane -L 1
bind C-j resize-pane -D 1
bind C-k resize-pane -U 1
bind C-l resize-pane -R 1
bind C-n next-window
bind C-p previous-window
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind a run-shell 'tmux popup -d "#{pane_current_path}" -xC -yC -w60% -h60% -E al'
bind-key s run-shell -b tmux-switch-pane.sh

set-option -g automatic-rename-format "#{pane_current_command}"

# Sesh
bind-key "S" run-shell "s"

# FZF
set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label=" Open URL "'
set -g @t-fzf-prompt '  '
set -g @t-bind 'T'
set -g @fzf-url-history-limit '2000'

# Catppuccin
set -g @catppuccin_flavour 'mocha' # or frappe, macchiato, mocha
set -g @catppuccin_pane_border_status "top"
set -g @catppuccin_pane_border_style "fg=$overlay1" # Use a value compatible with the standard tmux 'pane-border-style'
set -g @catppuccin_pane_active_border_style "fg=$overlay1" # Use a value compatible with the standard tmux 'pane-border-active-style'
set -g @catppuccin_window_status_icon_enable "yes"
set -g @catppuccin_window_left_separator " "
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " █"
set -g @catppuccin_window_number_position "right"
set -g @catppuccin_window_default_fill "number"
set -g @catppuccin_window_default_text "#W"
set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_user_text "#(gitmux -cfg $HOME/gitmux.conf '#{pane_current_path}')"
set -g @catppuccin_host_text "#($TMUX_PLUGIN_MANAGER_PATH/tmux-mem-cpu-load/tmux-mem-cpu-load --interval 2)"
set -g @catppuccin_user_icon ""
set -g @catppuccin_window_current_text "#W"
set -g @catppuccin_status_modules_right "host"
set -g @catppuccin_status_modules_left "session user"
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator ""
set -g @catppuccin_status_right_separator_inverse "no"
set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_connect_separator "no"
set -g @catppuccin_directory_text "#{pane_current_path}"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'catppuccin/tmux'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'joshmedeski/tmux-fzf-url'
set -g @plugin 'thewtex/tmux-mem-cpu-load'

# for neovim session restoration
set -g @resurrect-strategy-nvim 'session'

# Install `tpm` if needed.
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# Run tpm
run '~/.tmux/plugins/tpm/tpm'
