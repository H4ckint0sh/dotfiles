#!/usr/bin/env bash

# Custom n3 opener

file_path="$1"
 
# Right pane indx
right_pane_index=$(tmux display -p -t '{right-of}' '#{pane_index}')

if [ -z "$right_pane_index" ]; then

  # split horizontally and run helix command
  tmux split-window -h -d -l 80% hx

  new_right_pane_index=$(tmux display -p -t '{right-of}' '#{pane_index}')

  # Send ":" to start command input in Helix
	tmux send-keys -t $new_right_pane_index ":"

  # Send the "open" command with file path(s) to the pane and simulate Enter
	tmux send-keys -t $new_right_pane_index "open $file_path" C-m

  # Select the left pane
  tmux select-pane -L

else

  # Send ":" to start command input in Helix
	tmux send-keys -t $right_pane_index ":"

  # Send the "open" command with file path(s) to the pane and simulate Enter
	tmux send-keys -t $right_pane_index "open $file_path" C-m

  # Select the left pane
  tmux select-pane -L

fi

